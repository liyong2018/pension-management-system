<!--登录页面-->
<view class="login-container">
  <!-- 顶部Logo区域 -->
  <view class="header">
    <view class="logo">
      <image src="/images/logo-yunshuyinling.png" class="logo-image" mode="aspectFit"></image>
    </view>
    <text class="app-name">云数银龄</text>
    <text class="app-subtitle">智慧养老服务平台</text>
  </view>

  <!-- 登录表单 -->
  <view class="form-container">
    <view class="form-title">欢迎登录</view>
    
    <!-- 用户名输入 -->
    <view class="input-group">
      <view class="input-icon">
        <t-icon name="user" size="40rpx" color="#999"></t-icon>
      </view>
      <input 
        class="input-field" 
        type="text" 
        placeholder="请输入用户名" 
        value="{{username}}"
        bindinput="onUsernameInput"
        maxlength="50"
      />
    </view>

    <!-- 密码输入 -->
    <view class="input-group">
      <view class="input-icon">
        <t-icon name="lock-on" size="40rpx" color="#999"></t-icon>
      </view>
      <input 
        class="input-field" 
        type="{{showPassword ? 'text' : 'password'}}" 
        placeholder="请输入密码" 
        value="{{password}}"
        bindinput="onPasswordInput"
        maxlength="50"
      />
      <view class="password-toggle" bindtap="togglePassword">
        <t-icon name="{{showPassword ? 'browse' : 'browse-off'}}" size="40rpx" color="#999"></t-icon>
      </view>
    </view>

    <!-- 记住密码 -->
    <view class="remember-row">
      <view class="remember-checkbox" bindtap="toggleRemember">
        <t-icon name="{{rememberPassword ? 'check-circle-filled' : 'circle'}}" 
               size="36rpx" 
               color="{{rememberPassword ? '#4A90E2' : '#999'}}">
        </t-icon>
        <text class="remember-text">记住密码</text>
      </view>
      <text class="forgot-password" bindtap="forgotPassword">忘记密码？</text>
    </view>

    <!-- 登录按钮 -->
    <button 
      class="login-btn {{canLogin ? 'active' : 'disabled'}}" 
      bindtap="handleLogin"
      disabled="{{!canLogin || loading}}"
    >
      <text wx:if="{{!loading}}">登录</text>
      <view wx:else class="loading-container">
        <text class="loading-text">登录中...</text>
      </view>
    </button>

    <!-- 快速登录 -->
    <view class="quick-login">
      <view class="divider">
        <text class="divider-text">或</text>
      </view>
      <button class="wechat-login-btn" bindtap="wechatLogin">
        <t-icon name="logo-wechat" size="40rpx" color="#07C160"></t-icon>
        <text>微信快速登录</text>
      </button>
    </view>

    <!-- 注册链接 -->
    <view class="register-link">
      <text>还没有账号？</text>
      <text class="register-text" bindtap="goToRegister">立即注册</text>
    </view>
  </view>

  <!-- 底部信息 -->
  <view class="footer">
    <text class="footer-text">登录即表示同意</text>
    <text class="link-text" bindtap="showPrivacy">《隐私政策》</text>
    <text class="footer-text">和</text>
    <text class="link-text" bindtap="showTerms">《服务条款》</text>
  </view>
</view>

<!-- 加载遮罩 -->
<view class="loading-mask" wx:if="{{loading}}">
  <view class="loading-content">
    <text class="loading-text">登录中...</text>
  </view>
</view>