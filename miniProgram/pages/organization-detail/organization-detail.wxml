<!--æœºæ„è¯¦æƒ…é¡µé¢-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:elif="{{error}}" class="error-container">
    <text class="error-icon">âš ï¸</text>
    <text class="error-text">{{error}}</text>
    <button class="retry-btn" bindtap="onRetry">é‡è¯•</button>
  </view>

  <!-- æœºæ„è¯¦æƒ…å†…å®¹ -->
  <view wx:else class="organization-detail">
    <!-- æœºæ„å¤´éƒ¨ä¿¡æ¯ -->
    <view class="header-card">
      <view class="org-header">
        <view class="org-avatar">
          <text class="org-initial">{{organizationInfo.name ? organizationInfo.name.charAt(0) : 'æœº'}}</text>
        </view>
        <view class="org-info">
          <text class="org-name">{{organizationInfo.name || 'æœªçŸ¥æœºæ„'}}</text>
          <text class="org-type">{{organizationInfo.type || 'æœªçŸ¥ç±»å‹'}}</text>
          <view class="org-rating" wx:if="{{organizationInfo.rating}}">
            <text class="rating-stars">â˜…â˜…â˜…â˜…â˜†</text>
            <text class="rating-score">{{organizationInfo.rating}}</text>
          </view>
        </view>
        <view class="org-status {{organizationInfo.status === 'active' ? 'active' : 'inactive'}}">
          <view class="status-dot"></view>
          <text class="status-text">{{organizationInfo.status === 'active' ? 'è¥ä¸šä¸­' : 'æš‚åœæœåŠ¡'}}</text>
        </view>
      </view>
    </view>

    <!-- è”ç³»ä¿¡æ¯ -->
    <view class="info-card">
      <view class="card-header">
        <text class="card-title">è”ç³»ä¿¡æ¯</text>
      </view>
      <view class="contact-info">
        <view class="contact-item" wx:if="{{organizationInfo.phone}}">
          <view class="contact-icon phone-icon">ğŸ“</view>
          <view class="contact-content">
            <text class="contact-label">è”ç³»ç”µè¯</text>
            <text class="contact-value" bindtap="onCallPhone" data-phone="{{organizationInfo.phone}}">{{organizationInfo.phone}}</text>
          </view>
        </view>
        
        <view class="contact-item" wx:if="{{organizationInfo.email}}">
          <view class="contact-icon email-icon">ğŸ“§</view>
          <view class="contact-content">
            <text class="contact-label">é‚®ç®±åœ°å€</text>
            <text class="contact-value">{{organizationInfo.email}}</text>
          </view>
        </view>
        
        <view class="contact-item" wx:if="{{organizationInfo.address}}">
          <view class="contact-icon location-icon">ğŸ“</view>
          <view class="contact-content">
            <text class="contact-label">æœºæ„åœ°å€</text>
            <text class="contact-value" bindtap="onViewLocation">{{organizationInfo.address}}</text>
          </view>
        </view>
        
        <view class="contact-item" wx:if="{{organizationInfo.website}}">
          <view class="contact-icon web-icon">ğŸŒ</view>
          <view class="contact-content">
            <text class="contact-label">å®˜æ–¹ç½‘ç«™</text>
            <text class="contact-value">{{organizationInfo.website}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æœºæ„è¯¦æƒ… -->
    <view class="info-card">
      <view class="card-header">
        <text class="card-title">æœºæ„è¯¦æƒ…</text>
      </view>
      <view class="detail-info">
        <view class="detail-item" wx:if="{{organizationInfo.establishedDate}}">
          <text class="detail-label">æˆç«‹æ—¶é—´</text>
          <text class="detail-value">{{organizationInfo.establishedDate}}</text>
        </view>
        
        <view class="detail-item" wx:if="{{organizationInfo.capacity}}">
          <text class="detail-label">æœåŠ¡å®¹é‡</text>
          <text class="detail-value">{{organizationInfo.capacity}}äºº</text>
        </view>
        
        <view class="detail-item" wx:if="{{organizationInfo.currentOccupancy}}">
          <text class="detail-label">å½“å‰å…¥ä½</text>
          <text class="detail-value">{{organizationInfo.currentOccupancy}}äºº</text>
        </view>
        
        <view class="detail-item" wx:if="{{organizationInfo.staffCount}}">
          <text class="detail-label">å‘˜å·¥äººæ•°</text>
          <text class="detail-value">{{organizationInfo.staffCount}}äºº</text>
        </view>
        
        <view class="detail-item" wx:if="{{organizationInfo.licenseNumber}}">
          <text class="detail-label">è®¸å¯è¯å·</text>
          <text class="detail-value">{{organizationInfo.licenseNumber}}</text>
        </view>
      </view>
    </view>

    <!-- æœåŠ¡é¡¹ç›® -->
    <view class="info-card" wx:if="{{serviceList.length > 0}}">
      <view class="card-header">
        <text class="card-title">æœåŠ¡é¡¹ç›®</text>
      </view>
      <view class="service-grid">
        <view class="service-item" wx:for="{{serviceList}}" wx:key="id">
          <view class="service-icon">{{item.icon || 'ğŸ¥'}}</view>
          <text class="service-name">{{item.name}}</text>
          <text class="service-price" wx:if="{{item.price}}">Â¥{{item.price}}</text>
        </view>
      </view>
    </view>

    <!-- æœºæ„ä»‹ç» -->
    <view class="info-card" wx:if="{{organizationInfo.description}}">
      <view class="card-header">
        <text class="card-title">æœºæ„ä»‹ç»</text>
      </view>
      <view class="description-content">
        <text class="description-text">{{organizationInfo.description}}</text>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-card">
      <view class="action-buttons">
        <button class="action-btn primary-btn" bindtap="onViewStaff">
          <text class="btn-icon">ğŸ‘¥</text>
          <text class="btn-text">æŸ¥çœ‹å‘˜å·¥</text>
        </button>
        
        <button class="action-btn secondary-btn" bindtap="onViewArchive">
          <text class="btn-icon">ğŸ“‹</text>
          <text class="btn-text">äººå‘˜æ¡£æ¡ˆ</text>
        </button>
        
        <button class="action-btn contact-btn" bindtap="onContact" wx:if="{{organizationInfo.phone}}">
          <text class="btn-icon">ğŸ“</text>
          <text class="btn-text">è”ç³»æœºæ„</text>
        </button>
      </view>
    </view>

    <!-- æ›´æ–°æ—¶é—´ -->
    <view class="update-time" wx:if="{{lastUpdateTime}}">
      <text>æœ€åæ›´æ–°ï¼š{{lastUpdateTime}}</text>
    </view>
  </view>
</view>