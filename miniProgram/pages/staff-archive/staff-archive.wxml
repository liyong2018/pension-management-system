<!--pages/staff-archive/staff-archive.wxml-->
<view class="archive-container">

  <!-- 搜索栏 -->
  <view class="search-section">
    <view class="search-box">
      <icon class="search-icon" type="search" size="16" color="#999"></icon>
      <input class="search-input" placeholder="搜索姓名或护理类型" bindinput="onSearchInput" value="{{searchKeyword}}" />
    </view>
  </view>

  <!-- 加载状态 -->
  <view class="loading-section" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">正在加载人员档案...</text>
  </view>

  <!-- 人员列表 -->
  <view class="staff-list" wx:if="{{!loading}}">
    <view class="staff-card" wx:for="{{filteredStaff}}" wx:key="id" bindtap="onStaffTap" data-id="{{item.id}}">
      <!-- 人员头部信息 -->
      <view class="staff-header">
        <view class="staff-info">
          <view class="staff-name">{{item.name}}</view>
          <view class="staff-basic">{{item.gender}} · {{item.age}}岁</view>
        </view>
        <view class="care-type">{{item.careType}}</view>
      </view>

      <!-- 人员详细信息 -->
      <view class="staff-details">
        <view class="detail-row">
          <view class="detail-label">联系电话：</view>
          <view class="detail-value">{{item.phone}}</view>
        </view>
        <view class="detail-row">
          <view class="detail-label">护理等级：</view>
          <view class="detail-value">{{item.careLevel}}</view>
        </view>
        <view class="detail-row">
          <view class="detail-label">能力评估：</view>
          <view class="detail-value">{{item.ability}}</view>
        </view>
        <view class="detail-row">
          <view class="detail-label">健康状况：</view>
          <view class="detail-value health-status">{{item.health}}</view>
        </view>
      </view>

      <!-- 操作按钮 -->
      <view class="staff-actions">
        <button class="action-btn call-btn" bindtap="onCallTap" data-phone="{{item.phone}}" catchtap="true">
          联系家属
        </button>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{!loading && filteredStaff.length === 0}}">
    <image class="empty-icon" src="/images/profile.png" mode="aspectFit"></image>
    <text class="empty-text">暂无人员档案信息</text>
    <button class="refresh-btn" bindtap="loadStaffData">刷新重试</button>
  </view>

  <!-- 底部提示 -->
  <view class="footer-tip" wx:if="{{!loading && filteredStaff.length > 0}}">
    <text class="tip-text">共 {{filteredStaff.length}} 位老人</text>
  </view>
</view>